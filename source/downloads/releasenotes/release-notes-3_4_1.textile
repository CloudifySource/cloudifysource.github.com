---
layout: bt_default
title: Cloudify 3.4.1 Release notes
cat: User Guide
---
<notextile>
<section id="inner-headline">
	<div class="container">
		<div class="row">
			<div class="span12">
				<ul class="breadcrumb">
					<li><a href="/"><i class="icon-home"></i></a><i class="icon-angle-right"></i></li>
					<li>Download<i class="icon-angle-right"></i></li>
					<li>Release Notes<i class="icon-angle-right"></i></li>
					<li class="active">3.4</li>
				</ul>
				<br/>
				<h1><i class="icon icon-book"></i>&nbsp;&nbsp;<strong>Cloudify 3.4 Release Notes</strong></h1>	
			</div>
		</div>			
	</div>
</section>


	<section id="content">
	<div class="container">
				<div class="row">
					<div class="span12">
						<div class="wrapper">
							<div class="testimonial">
									
								<!-- <div class="collapse" id="collapsible"> -->
                                    <div class="row">
                                    <div class="span10">

                         <h1><strong>Release 3.4.1 Service Pack (JAN-2017)</strong></h1>
                                 <h2>Release Highlights</h2>
                                 <ul>
                                 	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5996">CF-5996</a> An automated process has been created that ensures that Cloudify agents connect to the correct Cloudify Manager IP in the event that Cloudify Manager has more than one private IP address.</li>
									<li><a href="https://cloudifysource.atlassian.net/browse/CFY6162">CF-6162</a> To optimize performance, as a response from the REST API, the maximum value that can be set for a page is 1000 records.</li>

                                 	</ul>
                                 	<h2>Fixed Issues</h2>
                               		<ul>

                               		<li><a href="https://cloudifysource.atlassian.net/browse/CFY6251">CF-6251</a> The issue in which Windows agents had a memory leak has been addressed.</li>
									<li><a href="https://cloudifysource.atlassian.net/browse/CFY6052">CF-6052</a> When copying key pairs, the existence of the destination directory is verified. If it does not exist, it is created.</li>
									<li><a href="https://cloudifysource.atlassian.net/browse/CFY3902">CF-3902</a> The issue in which the Diamond agent was not restarted when a VM was restarted has been addressed.</li>
									<li><a href="https://cloudifysource.atlassian.net/browse/CFY4233">CF-4233</a> Unicode characters are not supported in Blueprints. Strings in Blueprints are now checked to ensure there are no unicode characters.</li>
									<li><a href="https://cloudifysource.atlassian.net/browse/CFY-6210">CF-6210</a> Paging of blueprints and deployments screens is no longer limited to five pages.</li>
									<li><a href="https://cloudifysource.atlassian.net/browse/CFY-6211">CF-6211</a> A default sort is now implemented on the deployments screen.</li>
									<li><a href="https://cloudifysource.atlassian.net/browse/CFY-6212">CF-6212</a> The names of fields/columns are used consistently across blueprints and deployments screens.</li>
                                 
								 	</ul>
                                 	<h2>Known Issues</h2>
                               		<ul>
									
									<li><a href="https://cloudifysource.atlassian.net/browse/CFY6301">CF-6301</a> When you upgrade Cloudify Manager from version 3.4 to version 3.4.1, existing agents are not uninstalled. When you add a new agent to a host machine, it does not run.<br>
									<strong>Workaround:</strong> Delete the following from the host machine on which the agent is deployed: <br>
										<ul>
										<li>&#47;home&#47;centos&#47;cfy-agent&#47;vm_<var>xxxxx</var>.json</li>
										<li>&#47;home&#47;centos&#47;vm_<var>xxxxx</var>&#47;</li>
                                        </ul>
									
									</ul>

                                 </div>
                                 </div>			
								<!-- <div class="collapse" id="collapsible"> -->
                                    <div class="row">
                                    <div class="span10">

                         <h1><strong>Release 3.4.0.2 Patch (22-SEP-2016)</strong></h1>
                                 <h2>Release Highlights</h2>
                                 <ul>
                                 	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5606&sa=D&ust=1474552426693000&usg=AFQjCNFSRETHnhNUdcEAyVFLe_on5Kk86Q">CFY-5606</a> Increase auto-generated ID section's range. Cloudify auto-generates 5 hexa characters to be appended to every node instance's name, this may not be enough in some scenarios, both in testing and real-world ones. The range should be increased.</li>

                                 	</ul>
                                 	<h2>Fixed Issues</h2>
                               		<ul>

                               		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5971&sa=D&ust=1474552426697000&usg=AFQjCNHZ9Yc4MAeevgYaF3MB9sqgZgjBPA">CFY-5971</a> Windows 3.2.1 blueprints broken on new managers.</li>                                 	
                                 	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5866&sa=D&ust=1474552426698000&usg=AFQjCNETeAHgq-q24_yF1IE5gmv48sRfnA">CFY-5866</a> Deployment update resource removal isn't in order. When removing a set of nodes with dependencies between them, the order of removal isn't as it should be. E.g: trying to remove the "A connected_to B" graph, will result in trying to remove B first, and only then A. This should obviously be reversed.</li>
                                 	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5782&sa=D&ust=1474552426699000&usg=AFQjCNHg__i8pl8gGL63Jdy7LchBFTjqDA">CFY-5782</a> Deployment update broken for deployments migrated from 3.2.1.</li>
                                 	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5698&sa=D&ust=1474552426701000&usg=AFQjCNEfIQZH0W1ZW5ym-_pujJVJ4z-9bQ">CFY-5698</a> Management worker sporadically doesn't restart after reboot.</li>
                                 	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5640&sa=D&ust=1474552426702000&usg=AFQjCNHk9J8phpy__Vw2MnC3zVy15wX4dQ">CFY-5640</a> Snapshot restore fails on missing broker key. When trying to restore a snapshot from a manager that has stuck deployments it has empty dicts which makes the restore process to fail.</li>
                                 	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5632&sa=D&ust=1474552426704000&usg=AFQjCNGT7RIlaPIeHFRqR7K5m5xULNAc0g">CFY-5632</a> Snapshot restore may fail on elasticsearch timeout. When a snapshot is restored using elasticseach.helpers.bulk on a large snapshot, the operation may fail due to read timeout.</li>
                                 	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5631&sa=D&ust=1474552426705000&usg=AFQjCNGSvuy3KVAQ_Y2Qd2SHDof77bFnuA">CFY-5631</a> Dereferencing anchors aren't properly supported in blueprints. If an anchor holds some value which is overridden in the dereferenced object, the final value is sometimes the dereferenced one, and sometimes the overridden one.</li>
                                 	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5493&sa=D&ust=1474552426706000&usg=AFQjCNGOTZJEUFkZKCN9DbKDbXWyATyffw">CFY-5493</a> Scale workflow failure when scaling a node template which is a part of a group.</li>
                                 	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5453&sa=D&ust=1474552426707000&usg=AFQjCNG_JQc9pR4UYXEE_x0p-7oox9-TGA">CFY-5453</a> Deployment's ‘updated_at’ field isn't updated on a deployment update. Deployment objects have a ‘updated_at’ field. Unfortunately, it doesn't actually get updated on a deployment update.</li>
                                 </ul>

                                 </div>
                                 </div>			
								
                               <!-- <div class="collapse" id="collapsible"> -->
                                    <div class="row">
                                    <div class="span6">

                         <h1><strong>Release 3.4.0.1 Patch (16-AUG-2016)</strong></h1>
                                 <h2>Release Highlights</h2>
                                 <ul>
                                 	<li>Add Telecom Edition, for more information <a href="/downloads/TelcoEdition.html">see</a>.</li>
                                 	<p><strong>Telco Related Packages:</strong></p>
                                 	
                                 	<ul>
                                 		<li>Overlay Service Chaining</li>
                                 		<li>Netconf Plugin</li>
                                 		<li>TOSCA-YANG Data Modeling Interoperability</li>
                                 		<li>Clearwater vIMS Blueprint</li>
                                 		<li>F5 BigIP Plugin</li>
                                 	</ul>

                                 	</ul>
                                 	<h2>Fixed Issues</h2><a name="release3.4"></a>
                               		<ul>
                               		<li>UI - fix bug where deployment topology view is incorrect</li>                                 	
                                 	<li>UI - fix bug where blueprints -> plugins view doesn't show any plugins</li>
                                 </ul>

                                 </div>
                                 </div>

                                    <div class="row">
                                    <div class="span12">

                         <h1><strong>Release 3.4 (3-JUL-2016)</strong></h1>
						<div width="100%" text-align="center" class="aligncenter">
                                 <p class="text-left">
                               
                        <div style="overflow: hidden; display: inline-block;" class="btn btn-info btn-sm"><a href="#highlights"><font color="white">Feature Highlights</font></a>
                				</div>
                        <div style="margin-left:20px; overflow: hidden; display: inline-block;" class="btn btn-info btn-sm"><a href="#features"><font color="white">New Features</font></a>
                        </div>
                        <div style="margin-left:20px; overflow: hidden; display: inline-block;" class="btn btn-info btn-sm"><a href="#fixed"><font color="white">Fixed Issues</font></a>
                				</div>
                        <div style="margin-left:20px; overflow: hidden; display: inline-block;" class="btn btn-info btn-sm"><a href="#known"><font color="white">Known Issues</font></a>
                        </div>
                        <div style="margin-left:20px; overflow: hidden; display: inline-block;" class="btn btn-info btn-sm"><a href="#deprecated"><font color="white">Deprecated Features</font></a>
                        </div>
                				<div style="margin-left:20px; overflow: hidden; display: inline-block;" class="btn btn-theme btn-sm"><a href="http://getcloudify.org/downloads/releasenotes/3.4.0_Release_Notes.pdf" download><font color="white">Download Release Notes in PDF</font></a>
                				</div>	
								 </p> 
                        </div>
                        </div>
                        </div>
 <div class="row">
 <div class="span10">

<a name="highlights"></a>
<hr>

<h2><strong>Feature Highlights</strong></h2>

<h2>Orchestration</h2>

<ul>
<li><a href="http://docs.getcloudify.org/3.4.0/manager/update-deployment/"><strong>Deployment Update </strong></a>- Cloudify now allows updating application deployments, offering application operators and developers the ability to make topology changes and include new resources to running TOSCA deployments.</li>
<li><a href="http://docs.getcloudify.org/3.4.0/blueprints/spec-imports/"><strong>Blueprint Composition</strong></a> - Cloudify supports composition of blueprints which enhances the support for microservices architectures and allows decomposing large application blueprints into separate application and infrastructure blueprints.</li>
<li><a href="http://docs.getcloudify.org/3.4.0/blueprints/multiple-instances/#node-templates-scalable-configuration"><strong>Resource Grouping</strong></a> - Modeling of groups is now supported. This allows users to scale one-to-one relationships, and groups of resource templates.</li>
<li><a href="http://docs.getcloudify.org/3.4.0/plugins/openstack/#tips"><strong>NIC Ordering</strong></a> - Respecting relationship order in blueprints, enabling users to determine which network is assigned to which vNIC, including control over the management network.</li>
<li>Infrastructure + OpenStack plugin support. Other plugin updates to follow.</li>
</ul>

<h2>Cloudify Manager</h2>

<ul>
<li><a href="http://docs.getcloudify.org/3.4.0/manager/upgrade/"><strong>In-Place Manager Upgrade</strong></a> - A new Cloudify Manager upgrade process was introduced, which allows in-place upgrades for Cloudify Manager components and offers easier maintenance of the manager.</li>
<li><a href="http://docs.getcloudify.org/3.4.0/manager/maintenance-mode/"><strong>Manager Maintenance Mode</strong></a> - Allows the Cloudify administrator to halt running operations in a safe manner, while preventing users from triggering new executions, in order to maintain and upgrade the Cloudify manager.</li>
<li><strong>Thousands of Deployments Scalability</strong> - Overhaul of the manager workers architecture improves the scalability of Cloudify Manager by removing the dedicated deployment workers and consolidating all task executions to be handled by the Cloudify Management Worker</li>
</ul>

<h2>Manager Bootstrap</h2>
<p>Installation of the Cloudify Manager is now less error prone with embedded python packages and single package of all components needed for bootstrap.</p>

<ul>
<li><a href="http://docs.getcloudify.org/3.4.0/manager/bootstrapping/"><strong>Bootstrap</strong></a> Cloudify Manager using a single tar file instead of many archives.</li>
<li>Improved and more clear bootstrap logs.</li>
<li>Perform validations on bootstrap.</li>
<li>Plugins are not automatically uploaded to the manager during bootstrap.</li>
<li>In addition to existing Cloudify Manager bootstrap methods, Cloudify now offers AWS <a href="http://getcloudify.org/downloads/get_cloudify.html">AMI images and a QCOW image</a> for OpenStack for simpler and quicker installation.</li>
</ul>

<h2>Web User Interface</h2>
<p>Cloudify Web UI layout was improved for better use of screen real estate, and support for Plugin management and snapshots were introduced. This includes:</p>

<ul>
<li>New and improved UI layout</li>
<li>New Snapshots management view</li>
<li>New Plugins management view</li>
<li>Improved Composer topology auto-layout mechanism</li>
<li>Support of Groups in topology view</li>
<li>Executions can now be cancelled from executions tab in UI</li>
<li>Update deployment topology</li>
<li>Manager maintenance mode</li>
</ul>

<h2>Cloudify Composer</h2>
<p>Cloudify Composer is a graphical editor for creating YAML blueprints dynamically using a modern, drag and drop interface. Cloudify Composer enables topology modeling for complex applications while providing a means to implement relevant lifecycle operations via external plugins and scripts. Additional features include:</p>

<ul>
<li><a href="http://docs.getcloudify.org/3.4.0/composer/installation/">Script based installation for Linux/Mac</a></li>
<li><a href="http://docs.getcloudify.org/3.4.0/composer/blueprint-creation/#using-and-managing-stencils">Stencil management</a> - In addition to the built-in node types, Cloudify Composer allows loading and managing additional node types.</li>
<li>Auto layout improvements</li>
<li>Layout persistency</li>
<li>Import existing packaged blueprints in the composer canvas</li>
<li>Resource management - Cloudify Composer allows managing resources accompanying the blueprint</li>
</ul>

<h2>Cloudify CLI</h2>

<ul>
<li><a href="http://docs.getcloudify.org/3.4.0/cli/overview/"><strong>Cloudify CLI Improvements </strong></a>- Improvements in the CLI make it easier to install blueprints using a single command - &lsquo;cfy install&rsquo; - which eases onboarding of new applications. Commands &lsquo;cfy status&rsquo; and &lsquo;cfy logs&rsquo; were updated with more robust information.</li>
<li><a href="http://docs.getcloudify.org/3.4.0/installation/from-packages/"><strong>Improved CLI installation</strong></a> - Python is no longer needed as it is bundled in Cloudify CLI packages. Wagon is now included in Cloudify CLI.</li>
</ul>

<h2>Plugins</h2>

<ul>
<li>Azure Plugin - An all new Microsoft Azure plugin allows orchestration of Microsoft Azure IaaS with all of it&rsquo;s resources, including storage, network and compute with support for Windows and Linux.</li>
<li><a href="http://docs.getcloudify.org/3.4.0/plugins/aws/"><strong>Amazon AWS</strong></a> Plugin improvements with support for VPC and additional enhancements</li><a name="features"></a>
<li>VMware plugins including <a href="http://docs.getcloudify.org/3.4.0/plugins/vcloud/">vCloud</a> and <a href="http://docs.getcloudify.org/3.4.0/plugins/vsphere/">vSphere</a> are now open source - all VMWare plugins are now open source and available in the Cloudify Community edition.</li>
</ul>


<h2><strong>New Features</strong></h2>
<p>The following new features are available in this release:</p>

<ul>
		<li>CFY-5568 - Hot-keys support has been added to snapshots page in UI.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-3120">CFY-3210</a> - Fabric-plugin v1.4.1 now supports passing a `hide_output` list to all execution methods (e.g. `run_script`, `run_commands`, etc..). The list can receive the output groups described <a href="http://docs.fabfile.org/en/1.8/usage/output_controls.html">here</a> and will hide unwanted output from showing up. For instance, provided a list with a single item called `running`, any `run: &hellip;`, `put: &hellip;` or `get: &hellip;` messages will be hidden.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5276">CFY-5382</a> - The manager blueprints now use fabric-plugin 1.4.1 and use its `hide_output` feature to clean up bootstrap logs. The hidden output is the `running` group only to hide any `put`, `get` and `run` commands.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5276">CFY-5276</a> - Fabric-plugin v1.4.1 now supports passing a boolean `use_sudo` input to `run_commands` and `run_script`. This allows to run scripts or commands as sudo without stating &ldquo;sudo&rdquo; within the commands or scripts themselves. Coupled with the `sudo_prefix` env property in fabric, this can be used to execute a script or command using an alternative implementation of sudo.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5301">CFY-5301</a> - URLs for manager resources are no longer exposed via the manager blueprints. Instead, only the single resources package&rsquo;s url is exposed. All input files contain empty strings where the URLs of those resources previously resided. Now, supplying a URL in one of those resource fields, will override what&rsquo;s in the manager resources package. One culprit is that you cannot currently provide URLs to files with the same name as they will override one another.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4855">CFY-4855</a> - Bootstrap Validations</li>
		
		<span style="margin-left:5em">Note that you can ignore validations by changing the `ignore_bootstrap_validations` input to true</span>
		
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-4904">CFY-4904</a> - We now verify that the manager's resources package is available for download</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5006">CFY-5006</a> - We now verify that the manager is being bootstrapped only on the supported distributions. (currently, Centos 7.x and RHEL 7.x)</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5007">CFY-5007</a> - We now verify that there is enough memory (3792MB) for the manager. These are MINIMAL requirements and can vary by usage.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-4771">CFY-4771</a> - We now verify that the heap size provided for elasticsearch does not exceed the machine's memory minus some memory gap for other services</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5345">CFY-5345 </a>- We now verify that there are 5GB of free disk space on the host.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5381">CFY-5381</a> - We now verify that the manager's host is running Python 2.7.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5336">CFY-5336</a> - Validations are documented under Manager/Prerequisites and Manager/bootstrapping</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5300">CFY-5300</a> - Bootstrap Validation values for physical memory, disk space and heap size memory gap are configurable via manager blueprint inputs.</li>
		
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5335">CFY-5335</a> - Wagon is now a dependency of the CLI. This means that you can use wagon&rsquo;s CLI to install wagons in your local environment. After creating your wagon, simply run `(sudo) wagon install -s WAGON_PATH`</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5100">CFY-5100</a> - The ctx-py wrapper&rsquo;s logger now has a `warning` severity level. Before, there was only `warn`.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5000">CFY-5000</a> - Manager bootstrap improvements:</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5008">CFY-5008</a>, <a href="https://cloudifysource.atlassian.net/browse/CFY-5011">CFY-5011</a> - Make marketplace image builder work on openstack as well as AWS.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5012">CFY-5012</a> - Ensure SSH host keys are regenerated when marketplace image is configured.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5010">CFY-5010</a> - Ensure all IPs in configurations are correctly updated when image builder is used.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5013">CFY-5013</a> - Deploy specified user SSH keys to authorized_keys in image builder configuration blueprints.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4929">CFY-4929</a> - Deployment update</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5083">CFY-5083</a> - Enable overriding default &lsquo;update&rsquo; workflow with custom workflow.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5344">CFY-5344</a> - skipping install/uninstall related operations in deployment update.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5352">CFY-5352</a> - support of add/remove/modify deployment description.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5348">CFY-5348</a> - supporting passing several entries through the same rest request body. All of the body will still be passed as a stream.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5087">CFY-5087</a> - added resources under deployment context. These resources are a part of the deployment and not the blueprints. Each deployment has access to both its blueprint resources and deployment resource. If conflict arises, the deployment resource takes precedence.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-4930">CFY-4930</a> - support for intrinsic functions.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5088">CFY-5088</a> - support for adding/removing and modifying a workflow.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5247">CFY-5247</a> - support for add/remove/modify outputs.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5121">CFY-5121</a> - Detect All the differences between the current deployment and the proposed deployment update. Then, 'translate' those differences into standard api requests that can be executed by the Cloudify Manager.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-4927">CFY-4927</a> - Create CLI commands for deployment update.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5277">CFY-5277</a> - support for relationship ordering modifications.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5376">CFY-5376</a> - add &ldquo;Failed&rdquo; state for deployment update object. Since no two updates can run concurrently, and the update workflow is executed asynchronously, if a user wishes to execute another update / rollback after a failed update, they must issue the update command with a force flag which will set the previous update into a failed state and continue to execute the next update.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-4983">CFY-4983</a> - Verify that every change detected by the deployment update step extraction mechanism is supported as part of the deployment update process. For example, currently, adding a node is supported, but adding a policy type is not.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5096">CFY-5096</a> - After all the changes ('steps') that will be executed as part of the deployment update are extracted, they should be sorted by their order of execution. For example, we should remove a node only after removing all the relationships it is a part of.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5273">CFY-5273</a> - The initial mechanism that determined what changes were a part of a deployment update was based on .yaml blueprint files and resided in the dsl parser. The updated mechanism for this purpose is based on .json deployment plans and resides in the rest service. As a result, the old mechanism was no longer needed.</li>

		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4863">CFY-4863</a> - Wagons that are uploaded to the manager using the REST API are now installed as part of the upload process (if applicable) and uninstalled on plugin delete.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5260">CFY-5260</a> - Scale workflow has been updated to support scaling group names. The `node_id` parameters has been renamed to `scalable_entity_name` and the default value of `scale_compute` has been changed from true to false. The scale compute value is ignored when a group name is provided. The previous implementation has been kept to support older types.yaml versions.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4953">CFY-4953</a> - Have preupgrade validations run before upgrade process begins: We added validation scripts to each node's cloudify.interfaces.validation.creation interface, in the manager blueprint. Inside the script, an "is upgrade" check is used to only run the validations while upgrading, not while bootstrapping. The scripts perform basic checks, such as examining the directory structure, checking that required services are running.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5255">CFY-5255</a> - per-node sanity checks on bootstrap/upgrade/rollback: We added some sanity checks to the end of each node's start script (in the manager blueprint). The scripts perform basic checks, eg. the elasticsearch script runs a few queries against it, to see if it's running and if the cloudify_storage index exists.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5166">CFY-5166</a> - Set order of Openstack Server NICs according to relationship order: Changed the openstack VM creation code to use the order of the VM-network relationships, when passing networks to which a VM should be connected to. If not explicitly in a relationship, the management network will be automatically set as the first openstack network.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5285">CFY-5285</a> - `cfy agents install` doesn't respect ctrl+c: The `cfy agents install` command spawns several threads to run operations concurrently. The method of waiting on these threads that was used, made the CLI unresponsive to signals (eg. ctrl+C). We fixed it by using python's daemon threads instead. No other CLI commands used that method - all the commands remain responsive to signals.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5286">CFY-5286</a> - REST Service: GET / fails with an unhelpful error: The maintenance mode handler tried to examine the endpoint of unrouted request - which was breaking, turning 404s into 500s. We made the maintenance mode handler just ignore requests that couldn't be routed (404s)</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5308">CFY-5308</a> - CLI: installing plugins can use the global pip: in some circumstances, installing plugins from the CLI might errorneously install them to the system python, instead of a virtualenv. We fixed it by using the correct way (examining sys.executable) to discover the pip executable.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5330">CFY-5330</a> - Openstack: use the port from the relationship to connect vm to a network: Openstack VMs that have relationship to an openstack port, would be connected to the network this port was on, but we didn't guarantee that this particular port would be used. We changed the VM creation code to explicitly use the port that was passed in the relationship.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5116">CFY-5116</a> - manager sanity test.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5225">CFY-5225</a> - Data migration for persistent services.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4955">CFY-4955</a> - Rollback support for manager upgrade.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5332">CFY-5332</a> - Expose private IP as output in manager blueprint.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5306">CFY-5306</a> - Rollback CLI command.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5071">CFY-5071</a> - Manager-CLI version compatibility validation.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5271">CFY-5271</a> - Display group information in UI. Displaying in which group is the node, and allowing to select autocompleted groups when running scale workflow.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5342">CFY-5342</a> - deployment update. Enabling running &lsquo;update&rsquo; action on a deployment and showing update in process.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5366">CFY-5366</a> - maintenance activating - poll running executions. Polling remaining executions that prevent maintenance, presenting and allowing to cancel them.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5284">CFY-5284</a> - Add a Snapshots view to UI, which allows the user to create/import a snapshot, download or restore from a snapshot, or delete one.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4966">CFY-4966</a> - Add a Plugins view to UI, which allows the user to see all available plugins in manager, upload a plugin, download or delete it</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5002">CFY-5002</a> - CLI package now brings its own python and plugins, no need to compile on target machine (except for vSphere and vCloud in part of the cases), single rpm that runs on centos 6.5+ and rhel 6.5+, single deb file that runs on debian variants 7+ including ubuntu 14+, a Mac OS package (untested and not automated yet).</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-3461">CFY-3461</a>/<a href="https://cloudifysource.atlassian.net/browse/CFY-3630">CFY-3630</a> - By default, Manager Blueprints now consume only one resource (tar.gz file) which contains all of the manager&rsquo;s resources (+agents). The `manager_resources_package_url` inputs indicates its location. The `manager_resources_package_checksum_file` and `skip_checksum_validation` inputs allow to configure md5 checksum validation on this package. By default, md5 checksum validation does not occur as to not force users to make the checksum file accessible over the internet. Bootstrap should be faster now as only a single file is downloaded. Overriding of any package within the archive is possible by explicitly specifying another package in any of the different resource inputs (either Cloudify or External components or any of the agents). If the `manager_resources_package_url` is not provided, the previous bootstrap process takes place.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5160">CFY-5160 </a>- AWS Plugin 1.4.1 - Bundles VPC Manager + Client requests</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4949">CFY-4949</a> - AWS Plugin - Tag All Resources with UUID, Node Instance ID, Deployment ID + Optional Name property</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5168">CFY-5168</a> - When a user attaches a Volume to an Instance, the volume ID is now available in a runtime property of the instance (supports multiple volumes), and vice-versa. (also handles detach)</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5161">CFY-5161</a> - There was no added properties to the provider context for default subnet deployment. This will not be exploited by a new manager blueprint right now, since we are favoring being explicit over being implicit right now, but I think that offering these parameters via the provider context is still desireable.</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5162">CFY-5162</a>, <a href="https://cloudifysource.atlassian.net/browse/CFY-5163">CFY-5163</a> - Similarly, when a user makes use of the provider context to create a security group or an Elastic IP, there is a problem with deploying it to VPC in 1.3.1-1.4. This adds logic to handle deployment to VPC (and to the correct VPC).</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-4892">CFY-4892</a> - Handles an issue where security group needs to idempotently retry create operation before adding rules to the security group</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5150">CFY-5150</a> - Docker Plugin version 1.3.2 - Updated the Docker Py client library version, handles an error in the system tests connection to Docker host.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-2216">CFY-2216</a> - Relationship order is maintained for node instances and the install/uninstall workflows execute relationship operations in the order specified by the relationships defined in the blueprint. (uninstall works in reverse, scale and heal workflows are also properly handled)</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-2233">CFY-2233</a> - Group resources for supporting one-to-one relationship semantics within a group.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-1580">CFY-1580</a> - node_templates.node_name.capabilities.scalable.properties and policies.policy_name.properties now accept get_input and get_attribute. This can be used to inject the number of instances for a node/group from inputs/properties</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5221">CFY-5221</a> - Using get_attribute when there are multiple node instances is now supported of the &ldquo;calling&rdquo; node instances and the &ldquo;requested&rdquo; node instance belong to some shared group in which the &ldquo;requested&rdquo; has a single node instance in that group instance.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5071">CFY-5071</a> - Validate that CLI version and manager version are compatible.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4929">CFY-4929</a> - Deployment update:</li>
		<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5036">CFY-5036</a> - (<a href="https://cloudifysource.atlassian.net/browse/CFY-5084">CFY-5084</a>, <a href="https://cloudifysource.atlassian.net/browse/CFY-4965">CFY-4965</a>) adding/removing nodes and relationships.</li>
		<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-4964">CFY-4964</a> - adding nodes with multiple instances.</li>
		<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5085">CFY-5085</a> - Adding/modifying/removing interface operations.</li>
		<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5089">CFY-5089</a> - Adding/modifying/removing node properties.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5142">CFY-5142</a> - Add the ability to store resources in the context of a deployment.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5106">CFY-5106</a> - Enhance detailed view of 'task_failed' and 'task_rescheduled' events.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5034">CFY-5034</a> - Add maintenance mode to UI.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5201">CFY-5201</a> - Add padding to cloudify header</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5031">CFY-5031</a> - UI hotkeys for a complete keyboard experience.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4952">CFY-4952</a> - Manager in-place upgrade support. Reuse the manager&rsquo;s install workflow scripts to upgrade a running manager. As part of this process, we now save every resource/node input that was used during the install, so that it can be used for rollback in case of upgrade failure. In addition a &lsquo;use_existing_on_upgrade&rsquo; flag has been added to the manager-types to allow reuse on properties from the install process during upgrade.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5203">CFY-5203</a> - Rewrite Azure Plugin Epic - Total rewrite of the Azure Plugin - implements base classes for handling of Azure Client, multiple resource groups, Windows VM.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4937">CFY-4937 - </a>Implement a maintenance-mode command in the CLI.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4852">CFY-4852</a><a href="https://cloudifysource.atlassian.net/browse/CFY-4852"> - </a>Add feature to allow to download manager logs from CLI.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5082">CFY-5082 - </a>Only create Riemann core for a deployment if policies were actually used in the blueprint.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4168">CFY-4168</a> - Improve UI/Composer topology auto layout mechanism.</li>
		<li></li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5051">CFY-5051</a> - CLI help shows default values for arguments.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4401">CFY-4401</a> - CLI help is now consistent across commands with fixes in wording</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4988">CFY-4988</a> Blueprints difference utility is introduced as part of application deployment update feature, this tool helps summarizing the changes that would acure to the running deployment.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5079">CFY-5079</a><span style="text-decoration: underline;">/</span><a href="https://cloudifysource.atlassian.net/browse/CFY-5101">CFY-5101</a> Support for creating tmux based collaborative ssh sessions.</li>
		
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4824">CFY-4824 </a>- Blueprint Composition</li>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-4825">CFY-4825</a> - Extended CLI inputs functionality</li>
				<span style="margin-left:5em">You can now pass multiple --inputs flags (e.g. `cfy bootstrap &hellip; -i x.yaml -i y.yaml`)</span><br>
				<span style="margin-left:5em">You can now pass wildcards for passing multiple input files (e.g. `cfy bootstrap -i *.yaml`)</span><br>
				<span style="margin-left:5em">You can now pass directories containing input files (e.g. `cfy bootstrap -i my_inputs_file_dir/`)</span>
				<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-4826">CFY-4826</a> - You can now import `node_templates`, `inputs` and `outputs` multiple times.</li>
				<span style="margin-left:5em">Our docs reflect that you can now import `inputs`, `node_templates` and `outputs` and how to use the CLI to pass multiple flags.</span>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4691">CFY-4691</a> - Added native support for using ctx in the fabric plugin when using python scripts. You can now run Python scripts via the fabric plugin while using ctx the same way you would do when using the script plugin (i.e. `from cloudify import ctx`). There is some functionality missing like workflow parameters from cloudify.state, but it provides the basics for now. You can still call ctx for any bash command you need by calling `ctx(COMMAND_REF)` (e.g. `node_id = ctx(node id)`). See <a href="https://github.com/cloudify-cosmo/cloudify-plugins-common/blob/master/cloudify/ctx_wrappers/ctx-py.py">https://github.com/cloudify-cosmo/cloudify-plugins-common/blob/master/cloudify/ctx_wrappers/ctx-py.py</a></li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4691">CFY-4853</a> - Converted all Bash scripts in the manager blueprints to Python. These use the new ctx wrapper mentioned above. The transition was made to allow us to perform more complicated actions and parse complex data structures. As a result of this refactoring, <a href="https://cloudifysource.atlassian.net/browse/CFY-4606">CFY-4606</a> (bootstrap idempotency bug) was solved. It is important to note that we in no way officially declare that our bootstrap process is idempotent yet.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4956">CFY-4956</a> - .git folder will now be ignored when archiving the manager deployment during bootstrap; additionally, there&rsquo;s now a validation over the size of the manager deployment to ensure no other unnecessary resources get archived (max 50MB).</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4832">CFY-4832</a> - improve executions page : Deployments execution page, now shows is the execution is a system workflow and what are his parameters.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4762">CFY-4762</a> - management worker&rsquo;s log severity level is now configurable via the `management_worker_log_level` input in the manager blueprint.</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4867">CFY-4876</a><span style="margin-left:5em">CLI now accepts several verbosity levels.</span><br>
				<li style="margin-left:5em">-v will display tracebacks</li>
				<li style="margin-left:5em">-vv will also display debug log messages</li>
				<li style="margin-left:5em">-vvv will also display debug logging for loggers defined in config.yaml</li>
				<li style="margin-left:5em">CLI commands that also display events/logs now accept an optional --json flag that will make each event/log be emitted as json in its own line, to be easily parsable by external processes</li>
				<li style="margin-left:5em">Debug log messages are now stored in elasticsearch. They can be viewed in the cli by passing -vv (verbosity level 2)</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4860">CFY-4860</a><span style="margin-left:5em">plugin.workdir added as an API for plugins to get a work directory that is unique to the (deployment, plugin) tuple</span></li><br>
		<span style="margin-left:5em">plugin.prefix can be used to get the prefix where the plugin was installed</span><br>
		<span style="margin-left:5em">These two features were used to fix the diamond plugin for 3.4 (which broke to some extent after smart deployments was added)</span>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4931">CFY-4931</a> Added Windows Support to Host Pool</li>
				<span style="margin-left:5em">added port specifier for Windows hosts</span><br>
				<span style="margin-left:5em">added proper agent inputs for Windows hosts</span>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4940">CFY-4940</a> Added init script, debug loggers, and new lifecycle scripts</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4959">CFY-4959</a> Host Pool Plugin/Service Major Rewrite</li>
				<li style="margin-left:5em">Rewrote API server</li>
				<li style="margin-left:5em">Added service logging</li>
				<li style="margin-left:5em">Changed backend to TinyDB</li>
				<li style="margin-left:5em">Added mixed-OS pool support</li>
				<li style="margin-left:5em">Removed requirement for config YAML file</li>
				<li style="margin-left:5em">Added non-daemon service option</li>
				<li style="margin-left:5em">Added flask-restful exception handling</li>
		<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5035">CFY-5035</a> OS/Tags Filtering in Host Pool Service</li><a name="fixed"></a>
		
		<span style="margin-left:5em">Add support for adding os property and tags, as a list, to pool hosts and filtering during allocate.</span>
</ul>

<h2><strong>Fixed Issues</strong></h2>
<p>The following new feature is available in this pre release:</p>

<ul>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5574">CFY-5574</a> - Enable cancel execution from executions tab - Execution tab in deployment view is now updating live and executions table is ordered from most recent to last with an added column thats enable users to cancel running executions.</li>
	<li>CFY-5642 - Wrong error reported when running &ldquo;cfy node-instances list&rdquo; for a non-existing deployment.</li>
	<li>CFY-5585 - Maintenance mode strings have been improved.</li>
	<li>CFY-5531 - cfy logs get is inconsistent with other download functions in CLI.</li>
	<li>CFY-5499 - Improved validation error output on bootstrap.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5004">CFY-5004 </a>- Remove Plugins from Manager (blueprints).</li>
	<li><a href="https://github.com/cloudify-cosmo/wagon/issues/41">WAGON-41</a> - Wagon v0.3.1 broke creation and installation of Wagons on Windows in situations where `pip` is not available in the path but rather under the `scripts` dir under Python&rsquo;s installation directory. V0.3.2 fixes this issue fixes it by referring to the correct pip path.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5450">CFY-5450</a> - Update wagon to 0.3.2 across the board</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5586">CFY-5586</a> - Execution parameters schema in elasticsearch will no longer be indexed, allowing for different executions to have parameters of the same name with a different schema (including executions of different workflows and on different deployments)</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5536">CFY-5536</a> - Several step types are no longer supported in the deployment update mechanism:</li>
			<li style="margin-left:5em">Adding/removing/changing the target of a contained_in relationship. (or any relationship derived from contained_in)</li>
			<li style="margin-left:5em">Changing node type.</li>
			<li style="margin-left:5em">In both cases, in order to make those changes, renaming of the node is required. The old node would be deleted and a new one would be <span style="margin-left:5em">installed (This behaviour is consistent with those change - changing the contained in or modifying node type).</span></li>
</ul>

<ul>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5559">CFY-5559</a> - Adding a relationship between two added nodes sporadically failed. Now we add the relationships in regard to the topological order of the added nodes subgraph.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5516">CFY-5516</a> - Can't scale after dialog opened for the second time in UI.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5502">CFY-5502</a> - Scale workflow in UI - only groups are shown for scaling. It will now update the view even if nodes are loaded after groups + will now present a proper message if loading scale entities fails.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5461">CFY-5461</a> - "scale_compute" parameter in scale dialog. The parameter will not be shown a group is chosen.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5462">CFY-5462</a> - Improve maintenance mode dialog message.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5384">CFY-5384</a> - Made the &ldquo;install_python_compilers&rdquo; flag in the manager blueprint actually install gcc and python-devel - it is required for installing some plugins (eg. openstack) from source.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5469">CFY-5469</a> - Made the rabbitmq systemd unit file more reliable, using rabbitmqctl and a pidfile for stopping and starting.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5405">CFY-5405</a> - Fixed agent migration for deployments using old pre 3.3 types.yaml</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5401">CFY-5401</a> - Fixed bug related to manager plugins not getting installed on a new manager when using snapshots based manager recovery to upgrade from an old manager (3.2.1, 3.3.1) to a new manager (3.4)</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5375">CFY-5375</a> - Fixed minor bugs in agent migration.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5433">CFY-5433</a> - Fixed a bug where a plugin defining both workflows and central deployment agent operations, failed to install during deployment creation.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5481">CFY-5481</a> - Fixed a bug where &ldquo;partially&rdquo; installed deployment that were migrated from an old manager to a new manager, may cause uninstall to fail unexpectedly (when uninstall should basically ignore all errors)</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5492">CFY-5492</a> - Fixed a bug where the check for concurrent deployment modifications (scale workflows) was global rather than on a per deployment basis. It is perfectly fine for two deployments to run the scale workflow concurrently.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5505">CFY-5505</a> - Bug fix minor improvement in the scale workflow - If the delta parameter is passed as a string, it will be properly converted to an integer so one can now do `cfy executions start -p &lsquo;delta=-1&rsquo;` where previously it would fail with `-1` being parsed as string</li>
	<li><a href="https://github.com/cloudify-cosmo/wagon/issues/36">WAGON-36</a>/<a href="https://cloudifysource.atlassian.net/browse/CFY-5365">CFY-5365</a> - Fixed a bug in wagon in which it would use the python that&rsquo;s in the path instead of the one that&rsquo;s relative to the python being used to create/install the package. We now use Wagon 0.3.1 in Cloudify.</li>
	<li><a href="https://github.com/cloudify-cosmo/wagon/issues/35">WAGON-35</a>, <a href="https://cloudifysource.atlassian.net/browse/CFY-5294">CFY-5294</a> - When creating a wagon in the same directory where the package you&rsquo;re trying to create resides, wagon would fail stating that the directory already exists. Wagon now uses a temporary working directory to generate the archive so that shouldn&rsquo;t happen anymore.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-2792">CFY-2792</a> - <a href="https://cloudifysource.atlassian.net/browse/CFY-5335">CFY-5335</a> implicitly solves the inability to install plugins in the CLI</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5097">CFY-5097</a> - We now delete the built in sysvinit config file if it exists and leave only the systemd config provided with Cloudify</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5122">CFY-5122</a> - Previously, we used `sys.exit` in some scripts of the manager blueprints. We no longer do that and only use `ctx.abort_operation`.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5259">CFY-5259</a> - We no longer declare that our code is "proprietary" in the docs.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4439">CFY-4439</a> - Our upsteam configuration in nginx now uses 127.0.0.1 instead of localhost to prevent IPv6 conflicts.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5216">CFY-5216</a> - Nginx timeouts have changed across the board and read, write and connect timeouts are now set to 330s. This aims to solve the problem where while gunicorn allowed for 300s timeouts on REST requests, Nginx timed out. This affected deployment creation, for instance.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5340">CFY-5340</a> - The UI&rsquo;s texts in different areas should now be clearer, more consistent, and grammatically correct.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5326">CFY-5326</a> - The CLIs help texts and all log messages were refined to be more consistent and elaborate. Many syntactical and grammatical issues were addressed.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5253">CFY-5253</a> - Openstack manager blueprint now creates a class B management network subnet rather than a class C one - supporting more than 253 additional hosts on the subnet.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5331">CFY-5331</a> - fixed a bug in cfy version command when trying to retrieve the manager&rsquo;s version.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5009">CFY-5009</a> - Fixed a bug where the manager&rsquo;s file server was accessible on any port including via public IP.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4880">CFY-4880</a> - fixed misleading message about execution timing out in the CLI.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4663">CFY-4663</a> - added validation for successful operation on associating a floating IP with a server in the Openstack plugin.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5110">CFY-5110</a> - fixed incorrect validations for keypair creation on Openstack.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4216">CFY-4216</a> - fixed a bug where CLI &ldquo;snapshots restore&rdquo; command wouldn&rsquo;t fail even if the restoration of the snapshot did.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4679">CFY-4679</a> - better handling of failed shards in Elasticsearch.</li>
	<li>CFY-4929 - deployment update fixes</li>
	<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5254">CFY-5254</a> - the get deployment update endpoint was mistakenly deleted, <a href="https://cloudifysource.atlassian.net/browse/CFY-5347">CFY-5347</a> - cleanup endpoints and rename others</li>
	<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5299">CFY-5299</a> - updating deployment failed to import local resources (only online ones).</li>
	<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5304">CFY-5304</a> - removed operations were not deleted but set to an empty template operation. This is not the wanted behavior.</li>
	<li style="margin-left:5em"><a href="https://cloudifysource.atlassian.net/browse/CFY-5412">CFY-5412</a> - deployment update object aren&rsquo;t deleted when deleting a deployment.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5295">CFY-5295</a> - Before a task is executed for the first time during a workflow, the agent is &ldquo;pinged&rdquo; to verify it is alive and functioning. The call made to do so had a pretty short default time (1 second). The timeout has been increased to 30 seconds and this error is now considered recoverable so that retries are attempted in such cases.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5264">CFY-5264</a> - Tracebacks of error raised in all operations and workflows are now logged to the deployment log file.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5187">CFY-5187</a> - Safely closing AMQP connection</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4683">CFY-4683</a> - Elasticsearch clustering is now set to `false` by default to prevent clustering of nodes on the same network. There are now two inputs allowing users to control whether they want to enable multicast discovery (clustering) and on which port discovery should occur - `elasticsearch_clustering_enabled` and `elasticsearch_clustering_discovery_port`.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5128">CFY-5128</a> - Fixed regression in manager-blueprints transition to Python where you couldn&rsquo;t yum install packages not starting with http, https or ftp. This caused a problem when trying to `install_python_compilers`.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5127">CFY-5127</a> - A bug in RabbitMQ&rsquo;s configuration prevented the correct policies to be set. Only the highest priority policies were set as we set policies on the same queues sequentially when they actually needed to be set on the same call. This is now fixed.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4611">CFY-4611</a>/<a href="https://cloudifysource.atlassian.net/browse/CFY-4943">CFY-3493</a>/<a href="https://cloudifysource.atlassian.net/browse/CFY-5069">CFY-5069</a> - A log rotation bug prevented logs from rotating at all due to bad permissions set on the logrotate config files. This is now fixed. In addition, we configured log rotation to rotate based on the amount of files present in the service&rsquo;s directory. The rotation settings now allow for 7x100MB log files per service.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5190">CFY-5190</a> - Change 'nodes instances' to 'node instances' in UI.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5212">CFY-5212</a> - Fixed auto completion of metric names in UI&rsquo;s Grafana.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5185">CFY-5185</a> - Runtime properties may get lost if runtime properties of a node instance are being updated concurrently.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5056">CFY-5056</a> - Improved error handling for the &ldquo;cfy use&rdquo; command.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5115">CFY-5115</a><a href="https://cloudifysource.atlassian.net/browse/CFY-5115"> -</a> Cloudify agent (Celery) is not pulling tasks after restart.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4393">CFY-4393</a> - Workflow succeeded event not shown in CLI.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5111">CFY-5111</a> <a href="https://cloudifysource.atlassian.net/browse/CFY-5111">- </a>Long deployment names cause errors.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4987">CFY-4987 - </a>Accessing undefined runtime_properties behave differently in Python and ctx command.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5070">CFY-5070 - </a>Fabric plugin fails if VM&rsquo;s IP address matches a previous VM.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4805">CFY-4805 - </a>Improve error messages raised by DSL parser.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5218">CFY-5218</a> <a href="https://cloudifysource.atlassian.net/browse/CFY-5218">- </a>Cloudify leaks uncleanly closed sockets.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5175">CFY-5175</a><a href="https://cloudifysource.atlassian.net/browse/CFY-5175"> - </a>Diamond plugin fails to restart diamond.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4759">CFY-4759</a> - Some CLI commands had their `deployment-id` argument optional, whereas the REST client expected them to be required.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5032">CFY-5032</a> - If the user tries to install a blueprint using the default blueprint path and this path doesn&rsquo;t exist, she is advised to explicitly supply a path using the <code>-p/--blueprint-path</code> flag</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4823">CFY-4823</a> - Integrated script plugin&rsquo;s unit tests @ Appveyor</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-4958">CFY-4958</a> - investigated possible installation issues for psutil-plugin when not running under Administrator; the issue didn&rsquo;t reproduce.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5045">CFY-5045</a> - ui embed=true: adding embed=true to the url request parameters will now work, causing the header and footer to be display no content.</li><a name="known"></a>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5093">CFY-5093</a> - Host Pool Plugin now has locking to prevent allocating the same host twice to concurrent requests.</li>
</ul>


<h2><strong>Known Issues</strong></h2>
<ul>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5493">CFY-5493</a> - Cannot scale a group of instances that are also contained in another node. (e.g. a group containing a web server where the webserver is also contained in a compute node, and that compute node is not part of the group, but rather &ldquo;contains&rdquo; it)</li>
	<li><a href="https://github.com/cloudify-cosmo/wagon/issues/41">WAGON-41</a>- Wagon v0.3.1 breaks creation and installation of Wagons on Windows in situations where `pip` is not available in the path but rather under the `scripts` dir under Python&rsquo;s installation directory.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5676">CFY-5676 </a>- Failed Execution CLI Output exits before all events are printed</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5672">CFY-5672 </a>- Token auth secret_key is hardcoded in manager blueprint</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5670">CFY-5670 </a>- vSphere manager blueprint default RAM validation failure</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5648">CFY-5648 </a>- deployment update - changing node contained in relationship type</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5643">CFY-5643 </a>- REST Service: getting node instances for nonexistent deployment returns empty rather than 404</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5642">CFY-5642 </a>- Error reporting in `cfy node-instances list` is incorrect</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5630">CFY-5630 </a>- Openstack plugin fails with key path with no directories</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5626">CFY-5626 </a>- Can't update a deployment with no workflows</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5614">CFY-5614 </a>- Can't update deployment's node's type or parent node without changing the node's name</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5570">CFY-5570 </a>- Deployment Events panel stops refreshing on cancelled execution</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5566">CFY-5566 </a>- Snapshots UI doesn't report failure to restore snapshot on dirty master</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5561">CFY-5561 </a>- deployment update claims "unsupported changes" when there are no changes</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5540">CFY-5540 </a>- Update process not effecting relationships when used with AWS plugin</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5523">CFY-5523 </a>- cfy scale is breaking deployment if canceled during execution</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5511">CFY-5511 </a>- Getting gcc error on openstack plugin since no wagon</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5507">CFY-5507 </a>- Using `get_attribute` on a multi-instance node in outputs provides bad result</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5495">CFY-5495 </a>- install plugins should check if required plugins are already installed.</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5488">CFY-5488 </a>- Can't pass non-string value by direct input/parameter in CLI</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5482">CFY-5482 </a>- 500 error from REST service when attempting to execute a workflow with a unicode name</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5480">CFY-5480 </a>- Wildcard input path in deployment creation doesn't work properly</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5464">CFY-5464 </a>- Descending Sort by date fields in REST API doesn't work</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5459">CFY-5459 </a>- JSON provided on command-line isn't parsed</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5415">CFY-5415 </a>- Deployment update validations don't verify number of instances (scaling) wasn't modified</li>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-5246">CFY-5246 </a>- Non-string property value in cloudify manager blueprint (cloudify_agent.env) causes exception when installing deployments</li><a name="deprecated"></a>
	<li><a href="https://cloudifysource.atlassian.net/browse/CFY-1428">CFY-1428 </a>- agent VMs will have the Default security group on Openstack when there's no provider context and when VM is connected to another security group</li>
</ul>

<h2><strong>Deprecated Features</strong></h2>
<h3><strong>Breaking Changes</strong></h3>
<p>The following changes should be taken into consideration when upgrading to this release:</p>
<p>CFY-5315 - Running diamond plugin versions prior to 1.3.3 in &ldquo;central_deployment_agent&rdquo; mode is not compatible with this release.</p>

<p>The following features are deprecated and will be removed in future versions:</p>

<ul type="circle">
	<li>&ldquo;cloudify_agent&rdquo; property in cloudify.nodes.Compute type. &ldquo;agent_config&rdquo; should be used instead.</li>
	<li>&ldquo;install_agent&rdquo; property in cloudify.nodes.Compute type. &ldquo;Install_method&rdquo; in the &ldquo;agent_config&rdquo; property should be used instead.</li>
	<li>&ldquo;transient_deployment_workers_mode&rdquo; property in manager blueprints &ldquo;manager_configuration&rdquo; node. Transient workers mode is no longer relevant after an internal architecture change took place as part of improving deployments handling in the manager.</li>
	<li>&ldquo;cloudify.interfaces.host&rdquo; interace in the cloudify.nodes.Compute type.</li>
	<li>&ldquo;instances -&gt; deploy&rdquo; property in cloudify.nodes.Root. &ldquo;scalable&rdquo; capability should be used instead.</li>
	<li>&ldquo;ctx.related&rdquo; - ctx.source/target should be used instead.</li>
	<li>&ldquo;ctx.capabilities&rdquo; - ctx.source/target.instance.runtime_properties should be used instead.</li>
	<li>&ldquo;ctx.plugin&rdquo; no longer returns the current plugin&rsquo;s name but a data structure containing more information about the current plugin. Plugin name should be retrieved using: &ldquo;ctx.plugin.name&rdquo;.</li>
	<li>&ldquo;cloudify.utils.setup_default_logger". Use "cloudify.utils.setup_logger" instead.</li>
</ul>

</div>
</div>

</div>
</div>

</div>
</div>
</div>


</section>
{% include leadlanderform.html %}

</notextile>
